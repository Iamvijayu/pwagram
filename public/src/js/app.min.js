var defereedPromptEvent,serviceWorkerRegistration,enableNotificationButtons=document.querySelectorAll(".enable-notifications");function askPermissionforNotification(e){Notification.requestPermission().then(e=>{console.log("User action for notification permission: ",e),"granted"!==e?console.log("no notification permission granted"):checkforSubscriptions()})}function checkforSubscriptions(){var e;navigator.serviceWorker&&navigator.serviceWorker.ready.then(i=>(e=i,i.pushManager.getSubscription())).then(i=>{if(null==i){var n=urlBase64ToUint8Array("BIwZAJBoTgOOCs5gn4dS3zVKJFqKuCkWHK1yFotHUzEBqwAiT6E3EJlPl4ZndJwX7ns6HAsYMUJsDliMvSk8ETg");return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n})}return e.pushManager.getSubscription()}).then(e=>{if(e)return fetch("http://pwagramserver-env.sinphsihnw.us-east-2.elasticbeanstalk.com/subscriptions",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(e)})}).then(e=>{e.ok&&displayNotifications()}).catch(e=>{console.log("Error in pushing the subscription server url/key to server",e)})}function displayNotifications(){var e={body:"You have subscribed successfully",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notification",renotify:!0,actions:[{action:"confirm",title:"ok",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"cancel",icon:"/src/images/icons/app-icon-96x96.png"}]};navigator.serviceWorker.ready.then(i=>{i.showNotification("Success SW",e)})}"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(e=>{serviceWorkerRegistration=e,console.log("Service Worker Registered")}),window.addEventListener("beforeinstallprompt",e=>(console.log("before install prompt fired and prevented"),e.preventDefault(),defereedPromptEvent=e,!1)),"Notification"in window&&enableNotificationButtons.forEach(e=>{e.style.display="inline-block",e.addEventListener("click",askPermissionforNotification)});